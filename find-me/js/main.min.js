!function(t){var e={color:{allTime:10,addTime:0,lvMap:[2,3,4,5,5,6,6,7,7,7,8,8,8,8,8,8,9]},pic:{isOpen:!1,allTime:5,addTime:0,lvMap:[2,3,3,4,4,4,4,5,5,5,5,5,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8]}},i={wximgUrl:"http://chenhang.info/find-me/img/zm.png",imgUrl:"http://chenhang.info/find-me/img/zd.png",timeLineLink:"http://chenhang.info/find-me/"},n=0;!function(){var i=["img/ad03.png","img/ad04.png","img/ad11.png"],n=["http://chenhang.info/find-me/","http://chenhang.info/find-me/","http://mp.weixin.qq.com/s?__biz=MzA3MzAxNjEzOQ==&mid=200605643&idx=2&sn=c9f34e5e1e2928914c1c6a5125242254&scene=4#wechat_redirect"],a=function(t){var e=document.createElement("a"),a=Math.random()*i.length>>0;e.target="_blank",e.href=n[a],e.style.background="url("+i[a]+") no-repeat center",e.style.backgroundSize="contain",e.className="adbox",t?$(".adbox").remove():$("body").append(e)},o=$("#box"),r={lv:$("#room .lv em"),time:$("#room .time"),start:$("#dialog .btn-restart"),back:$("#dialog .btn-back"),share:$("#dialog .btn-share"),pause:$("#room .btn-pause"),resume:$("#dialog .btn-resume"),dialog:$("#dialog"),d_content:$("#dialog .content"),d_pause:$("#dialog .pause"),d_gameover:$("#dialog .gameover")},h={init:function(t,i,n){this.type=t,this.api=API[t],this.config=e[t],this.reset(),this.parent=n,this.el=i,this.renderUI(),this.inited||this.initEvent(),this.inited=!0,this.start()},renderUI:function(){var e=90==t.orientation||-90==t.orientation,i=e?t.innerHeight:t.innerWidth;i-=20,i=Math.min(i,500),o.width(i).height(i),this.el.show()},initEvent:function(){var e="ontouchstart"in document.documentElement?"touchend":"click",i=this;$(t).resize(function(){}),o.on(e,"span",function(){var t=$(this).data("type");"a"==t&&i.nextLv.call(i)}),r.pause.on(e,_.bind(this.pause,this)),r.resume.on(e,_.bind(this.resume,this)),r.start.on(e,_.bind(this.restart,this)),r.back.on(e,_.bind(this.back,this)),r.share.on(e,_.bind(this.share,this))},start:function(){a(!0),this.time>5&&r.time.removeClass("danger"),r.dialog.hide(),this._pause=!1,this.lv="undefined"!=typeof this.lv?this.lv+1:0,this.lvMap=this.config.lvMap[this.lv]||_.last(this.config.lvMap),this.renderMap(),this.renderInfo(),this.timer||(this.timer=setInterval(_.bind(this.tick,this),1e3))},share:function(){},resume:function(){a(!0),r.dialog.hide(),this._pause=!1},pause:function(){this._pause=!0,r.d_content.hide(),r.d_pause.show(),r.dialog.show(),a()},tick:function(){return this._pause?void 0:(this.time--,this.time<6&&r.time.addClass("danger"),this.time<0?void this.gameOver():void r.time.text(parseInt(this.time)))},renderMap:function(){if(!this._pause){var t=this.lvMap*this.lvMap,e="",i="lv"+this.lvMap;_(t).times(function(){e+="<span></span>"}),o.attr("class",i).html(e),this.api.render(this.lvMap,this.lv)}},renderInfo:function(){r.lv.text(this.lv+1)},gameOver:function(){try{WeixinJSBridge.call("showOptionMenu")}catch(t){}var e=this.api.getGameOverText(this.lv);this.lastLv=this.lv,this.lastGameTxt=e.txt,this.lastGamePercent=e.percent,r.d_content.hide(),r.d_gameover.show().find("h3").text(this.lastGameTxt),o.find("span").fadeOut(1e3,function(){r.dialog.fadeIn()}),this._pause=!0,this.reset(),a()},reset:function(){this.time=this.config.allTime,this.lv=-1},restart:function(){a(!0),$("#dialog").hide(),$("#room").hide(),$("#index").show()},nextLv:function(){this.time+=this.config.addTime,r.time.text(parseInt(this.time)),this._pause||this.start()},back:function(){this._pause=!0,this.el.hide(),r.dialog.hide(),this.parent.render()}};t.Game=h}(),function(a){var o={index:$("#index"),room:$("#room"),loading:$("#loading"),dialog:$("#dialog"),play:$(".play-btn"),playsemo:$(".playsemo-btn")},r={init:function(){this.initEvent(),this.loading()},loading:function(){function n(){s++,s==h&&r.render()}function a(){t.location.href="http://chenhang.info/find-me/"}if(e.pic.isOpen)for(var o=["../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg","../img/wxShare2.jpg"],h=o.length,s=0,d=0;h>d;d++){var m=new Image;m.onload=n,m.src=o[d]}else r.render();document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge&&(WeixinJSBridge.on("menu:share:appmessage",function(){i.tTitle="全民寻找房祖名",i.tContent="柯少你对龙叔的保证呢？",i.timeLineLink="http://chenhang.info/find-me/";var t=Game.lastLv>0?"我在1分钟内"+(Game.lastLv+1)+"次从柯少身边找到房祖名！可他不跟我走！":i.tContent;WeixinJSBridge.invoke("sendAppMessage",{img_url:i.wximgUrl,link:i.timeLineLink,desc:i.tContent,title:t},a)}),WeixinJSBridge.on("menu:share:timeline",function(){i.tTitle="全民寻找BOSS",i.tContent="柯少你对龙叔的保证呢？",i.timeLineLink="http://chenhang.info/find-me/";var t=Game.lastLv>0?"我在1分钟内"+(Game.lastLv+1)+"次从柯少身边找到房祖名！可他不跟我走！":i.tContent;WeixinJSBridge.invoke("shareTimeline",{img_url:i.wximgUrl,img_width:"640",img_height:"640",link:i.timeLineLink,desc:i.tContent,title:t},a)}))},!1),$(".shareWeiBo").on("click",function(){i.tContent=Game.lastLv>0?"我在1分钟内"+(Game.lastLv+1)+"次从柯少身边找到房祖名！可他不跟我走！ ！猛戳来@猎豹浏览器 来帮我#全民寻找房祖名#:http://chenhang.info/find-me/":"快从柯少身边找到房祖名，你的24k氪金眼还没瞎吗？快让你的朋友也来试试吧!!猛戳来@猎豹浏览器 玩#全民寻找房祖名#:http://chenhang.info/find-me/",i.timeLineLink="http://chenhang.info/find-me/",function(t,e,n,a,o,r,h,s,d){var m="http://v.t.sina.com.cn/share/share.php?",r=(i.timeLineLink,["url=","","&title=",n(h||e.title),"&source=",n(a),"&sourceUrl=",n(o),"&content=",d||"gb2312","&pic=",n(r||"")].join("")),c=document.createElement("a");c.href=[m,r].join(""),c.target="_blank",c.click()}(screen,document,encodeURIComponent,"","",i.imgUrl,i.tContent,i.timeLineLink,"页面编码gb2312|utf-8默认gb2312")}),$(".shareQQ").on("click",function(){i.tTitle=Game.lastLv>0?"我在1分钟内"+(Game.lastLv+1)+"次从柯少身边找到房祖名！可他不跟我走！ ！猛戳来帮我:http://chenhang.info/find-me/":"快从柯少身边找到房祖名，你的24k氪金眼还没瞎吗？快让你的朋友也来试试吧!!猛戳来@猎豹浏览器 玩#全民寻找房祖名#:http://chenhang.info/find-me/",i.tContent=Game.lastLv>0?"我在1分钟内"+(Game.lastLv+1)+"次从柯少身边找到房祖名！可他不跟我走！ ！猛戳来帮我:http://chenhang.info/find-me/":"快从柯少身边找到房祖名，你的24k氪金眼还没瞎吗？快让你的朋友也来试试吧!!玩#全民寻找房祖名#:http://chenhang.info/find-me/",i.timeLineLink="http://chenhang.info/find-me/";var t=encodeURIComponent(i.tContent),e=encodeURIComponent(i.timeLineLink),n=encodeURIComponent(i.tTitle),a=n,o=i.imgUrl,r="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?summary="+t+"&url="+e+"&pics="+o+"&title="+n+"&desc="+a,l=(screen.height,screen.width,document.createElement("a"));l.target="_blank",l.href=r,l.click()})},render:function(){o.loading.hide(),o.index.show()},initEvent:function(){document.body.addEventListener("touchmove",function(){event.preventDefault()});var t="ontouchstart"in document.documentElement?"touchstart":"click",e=this;o.play.on(t,function(){n=10;var t=$(this).data("type")||"color";o.index.hide(),Game.init(t,o.room,e)}),o.playsemo.on(t,function(){n=-1;var t=$(this).data("type")||"color";o.index.hide(),Game.init(t,o.room,e)})}};r.init(),a.API={}}(t),function(){var i=$("#box"),a="span",o=$("#help p"),r=$("#help_color"),h={lvT:["龙叔的脑残粉","龙叔的忠实粉","龙叔的路人粉","慧眼识祖名","火眼金睛","洞察一切","两眼冒光","24k氪金眼","已被亮瞎!"],lvTsemo:["龙叔的脑残粉","龙叔的忠实粉","龙叔的路人粉","慧眼识祖名","火眼金睛","洞察一切","两眼冒光","24k氪金眼","已被亮瞎!"],render:function(t,n){this.lv=n,o.hide(),r.show();var h=e.color.lvMap[n]||_.last(e.color.lvMap);this.d=15*Math.max(10-h,1),this.d=n>20?10:this.d,this.d=n>40?8:this.d,this.d=n>50?6:this.d,this.d=n>60?5:this.d,this.d=n>70?4:this.d;{var s=Math.floor(Math.random()*t*t),d=this.getColor(255-this.d);this.getLvColor(d[0])}i.find(a).css("background-color",d[1]).data("type","b"),i.find(a).eq(s).data("type","a").css({"background-image":"url(img/zm.png)","background-color":r[1]})},getColor:function(t){var e=[Math.round(Math.random()*t),Math.round(Math.random()*t),Math.round(Math.random()*t)],i="rgb("+e.join(",")+")";return[e,i]},getLvColor:function(t){var e=this.d,i=_.map(t,function(t){return t+e+n}),a="rgb("+i.join(",")+")";return[i,a]},getGameOverText:function(t){var e=15>t?0:Math.ceil((t-15)/5),i=n>5?this.lvT[e]||_.last(this.lvT):this.lvTsemo[e]||_.last(this.lvTsemo),a=i+"lv"+(t+1),o=2*t;return o=o>90?90+.15*t:o,o=Math.min(o,98),{txt:a,percent:o}}};API.color=h;!function(){for(var e=document.getElementsByTagName("a"),i=0;i<e.length;i++)e[i].addEventListener("touchstart",function(){},!1);var n=t.navigator.userAgent.toLowerCase(),a=$("#dialog"),o=$(".btn-boyaa");return"micromessenger"!=n.match(/MicroMessenger/i)?void(null!=n.match(/(iphone|android)/i)&&(a[0].style.backgroundSize="45%, 50%",o.hide())):(a[0].style.background="url(img/logo.png) 10px 10px no-repeat,url(img/share.png) top right no-repeat, #A74343",a[0].style.backgroundSize="45%, 50%",o.attr("href","http://mp.weixin.qq.com/s?__biz=MzA3MzAxNjEzOQ==&mid=200605643&idx=2&sn=c9f34e5e1e2928914c1c6a5125242254&scene=4#wechat_redirect"),$(".logoed").css({position:"fixed",bottom:50,left:"50%","margin-left":"-40px"}),void 0)}()}()}(window);